@import "tailwindcss";

html {
  font-family: 'Noto Sans KR', 'Manrope', sans-serif;
  /* font-size is dynamically set by themeStore */
}

@variant dark (&:where([data-theme="dark"], [data-theme="dark"] *));

@theme {
  --color-*: initial;

  /* Base Colors */
  --color-white: #ffffff;
  --color-black: #000000;

  /* Light & Dark Theme Colors */
  --color-primary: #607AFB;
  --color-background-light: #f5f6f8;
  --color-background-dark: #0f1323;
  --color-panel-light: #ffffff;
  --color-panel-dark: #1f2937;
  --color-border-light: #e5e7eb;
  --color-border-dark: #2d2938;
  --color-text-light-primary: #111827;
  --color-text-dark-primary: #f9fafb;
  --color-text-light-secondary: #6b7281;
  --color-text-dark-secondary: #9ca3af;

  /* Workbench Mode Colors (Red) */
  --color-workbench-primary: #EA2831;
  --color-workbench-bg-light: #f8f6f6;
  --color-workbench-bg-dark: #211111;
  --color-workbench-surface-dark: #1f1c26;
  --color-workbench-border-dark: #433c53;
  --color-workbench-text-muted: #a59db8;
  --color-workbench-input-dark: #131118;

  /* Hub Mode Colors (Blue) */
  --color-hub-primary: #359EFF;
  --color-hub-accent: #0284c7;
  --color-hub-accent-light: #E0F2FE;
  --color-hub-accent-dark: #0369a1;
  --color-hub-bg-light: #f5f7f8;
  --color-hub-bg-dark: #0f1923;
  --color-hub-surface-dark: #110d1a;

  /* Flow Mode Colors (Yellow) */
  --color-flow-primary: #FAC638;
  --color-flow-bg-light: #f8f8f5;
  --color-flow-bg-dark: #231e0f;
  --color-flow-accent: #CCFBF1;
  --color-flow-accent-dark: #0d9488;
}

[data-theme="dark"] {
    --color-primary: #8A9BFF;
    --color-background-light: #0f1323;
    --color-background-dark: #0f1323;
    --color-panel-light: #1f2937;
    --color-panel-dark: #1f2937;
    --color-border-light: #2d2938;
    --color-border-dark: #2d2938;
    --color-text-light-primary: #f9fafb;
    --color-text-dark-primary: #f9fafb;
    --color-text-light-secondary: #9ca3af;
    --color-text-dark-secondary: #9ca3af;

    --color-hub-accent: #38bdf8;
    --color-hub-accent-light: #0369a1;
    --color-hub-accent-dark: #7dd3fc;

    --color-flow-accent: #2dd4bf;
    --color-flow-accent-dark: #5eead4;
}

body {
    background-color: var(--color-background-light);
    color: var(--color-text-light-primary);
}

[data-theme="dark"] body {
    background-color: var(--color-background-dark);
    color: var(--color-text-dark-primary);
}

/* Material Icons Configuration */
.material-symbols-outlined {
    font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    font-size: 19.2px; /* 24px * 0.8 = 19.2px */
}

/* Utility Classes */
.form-input {
    @apply w-full rounded-lg border border-border-light dark:border-border-dark bg-panel-light dark:bg-panel-dark text-text-light-primary dark:text-text-dark-primary focus:outline-none focus:ring-2 focus:ring-primary/50 transition-colors;
}

.btn-primary {
    @apply px-4 py-2 rounded-lg bg-primary text-white font-medium hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all;
}

.btn-secondary {
    @apply px-4 py-2 rounded-lg border border-border-light dark:border-border-dark bg-transparent text-text-light-primary dark:text-text-dark-primary hover:bg-background-light dark:hover:bg-background-dark focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all;
}

.btn-ghost {
    @apply px-4 py-2 rounded-lg bg-transparent text-text-light-primary dark:text-text-dark-primary hover:bg-background-light dark:hover:bg-background-dark focus:outline-none transition-all;
}

.card {
    @apply rounded-xl bg-panel-light dark:bg-panel-dark border border-border-light dark:border-border-dark shadow-sm;
}

/* Mode-specific styles */
[data-mode="workbench"] {
    --mode-primary: var(--color-workbench-primary);
    --mode-bg-light: var(--color-workbench-bg-light);
    --mode-bg-dark: var(--color-workbench-bg-dark);
}

[data-mode="hub"] {
    --mode-primary: var(--color-hub-primary);
    --mode-bg-light: var(--color-hub-bg-light);
    --mode-bg-dark: var(--color-hub-bg-dark);
}

[data-mode="flow"] {
    --mode-primary: var(--color-flow-primary);
    --mode-bg-light: var(--color-flow-bg-light);
    --mode-bg-dark: var(--color-flow-bg-dark);
}

/* Custom scrollbar */
::-webkit-scrollbar {
    width: 6px; /* 8px * 0.8 = 6.4px, rounded to 6px */
    height: 6px;
}

::-webkit-scrollbar-track {
    background: var(--color-background-light);
}

::-webkit-scrollbar-thumb {
    background: var(--color-border-light);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--color-border-dark);
}

[data-theme="dark"] ::-webkit-scrollbar-track {
    background: var(--color-background-dark);
}

[data-theme="dark"] ::-webkit-scrollbar-thumb {
    background: var(--color-border-dark);
}

[data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
    background: var(--color-border-light);
}

/* Markdown Prose Styles */
.prose {
    --tw-prose-body: var(--color-text-light-primary);
    --tw-prose-headings: var(--color-text-light-primary);
    --tw-prose-links: #3b82f6;
    --tw-prose-bold: var(--color-text-light-primary);
    --tw-prose-code: #ec4899;
    --tw-prose-pre-code: #e5e7eb;
    --tw-prose-pre-bg: #1f2937;
    --tw-prose-quotes: var(--color-text-light-secondary);
}

[data-theme="dark"] .prose {
    --tw-prose-body: var(--color-text-dark-primary);
    --tw-prose-headings: var(--color-text-dark-primary);
    --tw-prose-links: #60a5fa;
    --tw-prose-bold: var(--color-text-dark-primary);
    --tw-prose-code: #f472b6;
    --tw-prose-pre-code: #e5e7eb;
    --tw-prose-pre-bg: #000000;
    --tw-prose-quotes: var(--color-text-dark-secondary);
}

/* Code Highlighting Customization */
.prose pre {
    padding: 0;
    margin: 0;
    background-color: transparent;
    border-radius: 0 0 0.5rem 0.5rem;
}

.prose pre code {
    background-color: transparent;
    padding: 1rem;
    display: block;
    overflow-x: auto;
    font-size: 0.875rem;
    line-height: 1.5;
}

/* Inline code styling */
.prose :not(pre) > code {
    background-color: #f3f4f6;
    color: #ec4899;
    padding: 0.2em 0.4em;
    border-radius: 0.25rem;
    font-size: 0.875em;
    font-weight: 600;
}

[data-theme="dark"] .prose :not(pre) > code {
    background-color: #374151;
    color: #f472b6;
}

/* Override highlight.js theme for better dark mode */
[data-theme="dark"] .hljs {
    background: #000000 !important;
    color: #e5e7eb !important;
}

/* Link styling */
.prose a {
    text-decoration: none;
    color: #3b82f6;
    font-weight: 500;
}

.prose a:hover {
    text-decoration: underline;
}

[data-theme="dark"] .prose a {
    color: #60a5fa;
}

/* Table styling */
.prose table {
    border-collapse: collapse;
    width: 100%;
}

.prose th {
    background-color: #f9fafb;
}

[data-theme="dark"] .prose th {
    background-color: #1f2937;
}

/* Blockquote styling */
.prose blockquote {
    border-left-width: 4px;
    border-left-color: #3b82f6;
    padding-left: 1rem;
    font-style: italic;
    margin: 1rem 0;
}

[data-theme="dark"] .prose blockquote {
    border-left-color: #60a5fa;
}

/* List styling */
.prose ul,
.prose ol {
    padding-left: 1.5rem;
}

.prose li {
    margin: 0.25rem 0;
}

/* Remove default margins that conflict with our layout */
.prose > :first-child {
    margin-top: 0;
}

.prose > :last-child {
    margin-bottom: 0;
}

/* KaTeX Math Styling */
.katex {
    font-size: 1.1em;
}

.katex-display {
    margin: 1.5rem 0;
    overflow-x: auto;
    overflow-y: hidden;
}

[data-theme="dark"] .katex {
    color: #e5e7eb;
}

[data-theme="dark"] .katex .mord.text {
    color: #e5e7eb;
}

/* Mermaid Diagram Styling */
.mermaid {
    display: flex;
    justify-content: center;
    margin: 1rem 0;
}

[data-theme="dark"] .mermaid {
    filter: invert(0.9) hue-rotate(180deg);
}

[data-theme="dark"] .mermaid svg {
    background-color: transparent;
}

/* Image Zoom Overlay */
[data-rmiz-overlay] {
    background-color: rgba(0, 0, 0, 0.9);
}

[data-theme="dark"] [data-rmiz-overlay] {
    background-color: rgba(0, 0, 0, 0.95);
}

/* Ensure images don't overflow */
.prose img {
    max-width: 100%;
    height: auto;
    border-radius: 0.5rem;
}